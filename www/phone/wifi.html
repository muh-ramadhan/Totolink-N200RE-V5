<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="/static/css/phone/style.css"></head><body><div id="app"></div><script type="text/x-template" id="main"><div>
  <div class="toper">
	<phone-back url="/phone/home.html" :title="lang_t('menu.wifi')"></phone-back>
  </div>  
  <div class="content">
  	<div class="group" v-if="wifiDualband != '0'">
	  <div class="item-sw"><b>{{ lang_t('wifi.merge') }}</b></div>
	  <div class="item-r">
		<x-switch v-model="merge" :disabled="mergeAbled"></x-switch>
	  </div>		
	</div>
	<wifi-set :enable-dis="wifiSchEnabled2g" :state-text="!merge ? '2.4GHz ' : ''" v-model="wifi2Param"></wifi-set>
    <div v-show="!merge" v-if="wifiDualband != '0'">
	  <wifi-set :enable-dis="wifiSchEnabled5g" :state-text="wifiDualband == '1' ? '5GHz ' : '5GHz(1) '" type="1" v-model="wifi5Param"></wifi-set>
	</div>
    <div v-show="!merge" v-if="wifiDualband == '2'">
	  <wifi-set :enable-dis="wifiSchEnabled5g2" state-text="5GHz(2) " type="2" v-model="wifi52Param"></wifi-set>
	</div>
  </div>
  <div class="footer">
	<button class="btn" @click="applyFun">{{ lang_t('common.apply') }}</button>
  </div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery-3.2.1.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/phone_layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>Vue.component("wifi-set",{template:'\t\t<div>\t\t\t<div class="space"></div>\t\t\t<div class="group">\t\t\t\t<div class="item-sw"><b>{{ stateText + lang_t(\'wifi.state\') }}</b></div>\t\t\t\t<div class="item-r">\t\t\t\t\t<x-switch v-model="wifi.enable" :disabled="enableDis"></x-switch>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group">\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.ssid\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<input type="text" v-model="wifi.ssid" maxlength="32" :disabled="!wifi.enable">\t\t\t\t</div>\t\t\t</div>\t\t\t<div v-if="globalConfig.wifiWepWpaSupport">\t\t\t\t<div class="group">\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.encryption\') }}</div>\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t<select v-model="wifi.ew" :disabled="!wifi.enable" @change="ewChange()">\t\t\t\t\t\t\t<option value="0">{{ lang_t(\'wifi.dispass\') }}</option>\t\t\t\t\t\t\t<option value="5">WPA/WPA2-PSK({{lang_t(\'common.recommend\')}})</option>\t\t\t\t\t\t\t<option value="4">WPA2-PSK</option>\t\t\t\t\t\t\t<option value="3">WPA-PSK</option>\t\t\t\t\t\t\t<option value="2" v-if="!globalConfig.wifiWepNoSupport&&(type != 0 || (type == 0 && wifi.band != 6))">{{ lang_t(\'wifi.shared_key\') }}</option>\t\t\t\t\t\t\t<option value="1" v-if="!globalConfig.wifiWepNoSupport&&(type != 0 || (type == 0 && wifi.band != 6))">{{ lang_t(\'wifi.open_key\') }}</option>\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div v-show="wifi.ew!=0">\t\t\t\t\t<div class="group">\t\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.encryption_type\') }}</div>\t\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t\t<select v-model="wifi.et" :disabled="!wifi.enable">\t\t\t\t\t\t\t\t<option v-for="data in passTypeOp" :value="data.value">{{data.name}}</option>\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="group" v-show="!globalConfig.wifiWepNoSupport">\t\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.pass_type\') }}</div>\t\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t\t<select v-model="wifi.kt" :disabled="!wifi.enable">\t\t\t\t\t\t\t\t<option value="0">HEX</option>\t\t\t\t\t\t\t\t<option value="1">ASCII</option>\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group" v-show="(globalConfig.wifiWepWpaSupport&&wifi.ew!=0)||!globalConfig.wifiWepWpaSupport">\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.pass\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<input type="text" v-model="wifi.key" v-pass :maxlength="passMaxLen" :disabled="!wifi.enable">\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group">\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.hide_ssid\') }}</div>\t\t\t\t<div class="item-r">\t\t\t  \t\t<div style="float:right;margin:-20% -45% 0 0;">\t\t\t\t\t\t<x-checkbox v-model="wifi.hssid" :disabled="!wifi.enable"></x-checkbox>\t\t\t  \t\t</div>\t\t\t\t</div>\t\t  \t</div>\t\t\t<div class="group" v-if="globalConfig.wifiWpa2Wpa3Support">\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.wpa3\') }}</div>\t\t\t\t<div class="item-r">\t\t\t  \t\t<div style="float:right;margin:-20% -45% 0 0;">\t\t\t\t\t\t<x-checkbox v-model="wifi.wpa" :disabled="!wifi.enable" @change="wpaChange()"></x-checkbox>\t\t\t  \t\t</div>\t\t\t\t</div>\t\t  \t</div>\t\t</div>\t\t',props:{params:{default:function(){return{}}},stateText:{default:""},enableDis:{default:!1},type:{default:0}},model:{prop:"params"},data:function(){return{wifi:{enable:!1,ssid:"",key:"",hssid:!1,wpa:!1,kt:"",et:"",ew:"0"},enableDis:!1}},updated:function(){globalConfig.wifiWepWpaSupport&&(this.wifi.passLen=this.passMaxLen),this.$emit("input",this.wifi)},watch:{params:function(){$.extend(this.wifi,this.params)}},computed:{passMaxLen:function(){var t=63;if(globalConfig.wifiWepWpaSupport){var i=this.wifi.kt,a=this.wifi.et,e=this.wifi.ew;0!=i||3!=e&&4!=e&&5!=e?"1"==a?t="0"==i?10:5:"2"==a&&(t="0"==i?26:13):t=64}return this.wifi.key.length>t&&(this.wifi.key=""),t},passTypeOp:function(){var t=["WEP-64","WEP-128","TKIP","AES","TKIP/AES"],i=[];switch(this.wifi.ew.toString()){case"1":case"2":i=[0,1];break;case"3":i=[2];break;case"4":case"5":i=[3,4]}0==this.type&&6==this.wifi.band&&(i=[3]);for(var a=0;a<i.length;a++)i[a]={value:i[a]+1,name:t[i[a]]};return i}},created:function(){$.extend(this.wifi,this.params)},methods:{wpaChange:function(t){this.wifi.wpa&&Cstool.Mark({content:lang_t("wifi.wpa3_info"),l_text:lang_t("common.ok")})},ewChange:function(){switch(this.wifi.ew.toString()){case"1":case"2":this.wifi.et="1";break;case"3":this.wifi.et="3";break;case"4":case"5":this.wifi.et="5"}this.wifi.kt="1"}}});var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,data:[],merge:!1,wifiDualband:"0",wifiSchEnabled2g:!1,wifiSchEnabled5g:!1,wifiSchEnabled5g2:!1,mergeAbled:!1,wifi2Param:{},wifi5Param:{},wifi52Param:{}}},created:function(){var e=this;uiPost.getWiFiEasyCfg(function(a){"rpt"!=globalConfig.opmode&&"wisp"!=globalConfig.opmode?e.merge="1"==a.merge:e.mergeAbled=!0,"1"!=a.rpt_enable&&"1"!=a.wifiSchEnabled2g||(e.wifiSchEnabled2g=!0);var t=function(t,i){e[t]={ssid:a["ssid"+i],key:a["key"+i],hssid:"1"==a["hssid"+i],enable:"1"!=a["wifiOff"+i],wpa:"2"==a["wpaMode"+i],band:a["band"+i]},globalConfig.wifiWepWpaSupport&&(i&&(i="_"+i),e[t].ew=a["encryptionWay"+i]||"0",e[t].et=a["encryptionType"+i],e[t].kt=a["keyType"+i])};if(e.wifiDualband=a.wifiDualband,t("wifi2Param",""),"0"!=e.wifiDualband&&(t("wifi5Param","5g"),"1"!=a.rpt_enable_5g&&"1"!=a.wifiSchEnabled5g||(e.wifiSchEnabled5g=!0)),"2"==e.wifiDualband){if(t("wifi52Param","5g2"),globalConfig.wifiWepWpaSupport&&"0"==a.ew)return!0;var i=a.key;if(_s=cs.string(i),globalConfig.wifiWepWpaSupport&&0==_s)return f(msg_d+lang_t("wifi.pass")+lang_t("wan.msg1")),!1}})},methods:{errorFun:function(t){Cstool.Mark({content:t,l_text:this.lang_t("common.back")})},verifyData:function(t,i,a){var e,s=this.errorFun;if(t.enable){if(0==(e=cs.ssid(t.ssid)))return s(i+lang_t("wifi.msg1")),!1;if(4==e)return s(i+lang_t("wifi.msg18")),!1;if(1==e)return s(i+lang_t("wifi.msg20")),!1;if(2==e)return s(i+lang_t("wifi.msg3")),!1;if(globalConfig.wifiWepWpaSupport&&"0"==t.ew)return!0;var n=t.key;if(e=cs.string(n),globalConfig.wifiWepWpaSupport){if(0==e)return s(i+lang_t("wifi.pass")+lang_t("wifi.msg6")),!1;if(63!=t.passLen)return"1"!=t.kt||n.length==t.passLen&&99==e?!!("0"!=t.kt||n.length==t.passLen&&/^[\da-fA-F]+$/.test(n))||(s(i+lang_t("wifi.pass_16",[t.passLen])),!1):(s(i+lang_t("wifi.pass_ascii",[t.passLen])),!1)}if(globalConfig.wifiWepWpaSupport&&"0"==t.kt)return!(!/^[\da-fA-F]+$/.test(n)||n.length!=t.passLen)||(s(i+lang_t("wifi.pass_16",[t.passLen])),!1);if(0!=e||globalConfig.wifiWepWpaSupport){if(1==e)return s(i+lang_t("wifi.msg5")),!1;if(n.length<8||n.length>t.passLen)return s(i+lang_t("wifi.msg4")),!1}}},applyFun:function(){var a={},t=function(t,i){a["ssid"+i]=t.ssid,a["key"+i]=t.key,globalConfig.wifiWpa2Wpa3Support&&(a["wpaMode"+i]=t.wpa?"2":"1"),a["wifiOff"+i]=t.enable?"0":"1",a["hssid"+i]=t.hssid?"1":"0",globalConfig.wifiWepWpaSupport&&(i&&(i="_"+i),a["encryptionWay"+i]=t.ew,a["encryptionType"+i]=t.et,a["keyType"+i]=t.kt)};if(t(this.wifi2Param,""),0!=this.verifyData(this.wifi2Param,"")){if(a.merge=this.merge?"1":"0","0"!=this.wifiDualband)if(this.merge)t(this.wifi2Param,"5g"),"2"==this.wifiDualband&&t(this.wifi2Param,"5g2");else{if(t(this.wifi5Param,"5g"),0==this.verifyData(this.wifi5Param,"2"==this.wifiDualband?"5G (1) ":"5G "))return;if("2"==this.wifiDualband&&(t(this.wifi52Param,"5g2"),0==this.verifyData(this.wifi52Param,"5GHz (2) ")))return}var i=function(){uiPost.setWiFiEasyCfg(a,function(t){var i=30;t.wtime&&"0"!=t.wtime&&(i=Number(t.wtime)),Cstool.Mark({type:"load",time:i,content:lang_t("common.effective"),success:function(){Cstool.Flag({content:lang_t("common.success_relink"),btnText:lang_t("common.back"),ok:function(){location.reload()}})}})})};globalConfig.wifiWepWpaSupport?i():("0"!=this.wifiDualband||this.wifi2Param.key)&&("1"!=this.wifiDualband||this.wifi5Param.key&&this.wifi2Param.key)&&("2"!=this.wifiDualband||this.wifi5Param.key&&this.wifi2Param.key&&this.wifi52Param.key)?i():Cstool.Mark({content:lang_t("wifi.msg14"),cancel:function(){i()}})}}}}</script><script src="/static/js/main.js"></script></body></html>